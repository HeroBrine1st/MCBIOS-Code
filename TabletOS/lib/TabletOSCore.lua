local a={}local b=require("filesystem")local c=require("computer")local d=require("component")local e=require("ECSAPI")local f=require("term")local g=d.gpu;a.languagePackages={en={settings="Settings",shutdown="Shutdown",reboot="Reboot",language="Language",selLanguage="Select language",monitorOnline="Monitor",enterNickname="Enter nickname:",logout="Logout",shutdownI="Shutting down",newFolder="New folder",newFile="New file",updateFileList="Update files",fileManager="File Manager",power="Sleep"},ru={settings="Настройки",shutdown="Выключить",reboot="Перезагрузить",language="Язык",selLanguage="Выберите язык",monitorOnline="Монитор",enterNickname="Введите никнейм игрока:",logout="Завершение сеанса",shutdownI="Завершение работы",newFolder="Новая папка",newFile="Новый файл",updateFileList="Обновить",fileManager="Файлы",power="Сон"}}a.language="en"function a.getLanguage()local h,i=io.open("/.tabletos","r")if h then language=h:read(b.size("/.tabletos")+1)h:close()return language else local h=io.open("/.tabletos","w")h:write("en")h:close()return"en"end end;function a.saveLanguage()b.remove("/.tabletos")local h=io.open("/.tabletos","w")h:write(a.language)h:close()end;function a.changeLanguage(language)if language then c.pushSignal("changeLanguage",a.language,language)a.language=language;a.saveLanguage()end end;function a.getLanguagePackages()return a.languagePackages[a.getLanguage()]end;function a.internetRequest(j)local k,l=pcall(d.internet.request,j)if k then local m=""while true do local n,o=l.read()if n then m=m..n else if o then return false,o else return true,m end end end else return false,reason end end;function a.getFile(j,p)local k,reason=a.internetRequest(j)if k then b.makeDirectory(b.path(p)or"")b.remove(p)local q=io.open(p,"w")if q then q:write(reason)q:close()end;return true,reason else return false,reason end end;function a.downloadFileListAndDownloadFiles(r,s)if s then print("Downloading file list")end;local k,t=a.internetRequest(r)if k then local u=load("return "..t)local k,v=pcall(u)if k then for w=1,#v do a.getFile(v[w].url,v[w].path)if s then print("Downloading "..v[w].path)end end else error(v)end else error(t)end end;function a.saveDisplayAndCallFunction(...)local x,y=d.gpu.getResolution()local z=e.rememberOldPixels(1,1,x,y)local A={pcall(...)}e.drawOldPixels(z)return table.unpack(A)end;return a
